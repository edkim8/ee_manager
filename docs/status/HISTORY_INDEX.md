# History Index: Technical Decision Log

This file tracks key architectural decisions and completed milestones. **Latest Update**: [2026-02-19] H-042: Inventory Life-Cycle System - Completed multi-tier inventory catalog with installations tracking, mobile-optimized searchable selectors, and photo-lifecycle integration. Read this at the start of a session to "download" past wisdom without reading the full archives.

| ID | Module | Key Decisions | Archive Link |
|----|--------|---------------|--------------|
| H-001 | Initialization | Established 2-Layer "Goldfish" Architecture (Base/Ops). Enforced Spec-First Rule. | [INIT_SCAFFOLD](../archive/INIT_SCAFFOLD.md) |
| H-002 | Database | Implemented `profiles` table with RLS and Auto-Triggers. | - |
| H-003 | UI Strategy | Pivot to "Nuxt UI First" + JIT Components. Abandoned custom Atoms. | [ATOM_SPEC](../archive/01_UI_KIT_ATOMS_OBSOLETE.md) |
| H-004 | Architecture | Adopted Nuxt UI v4 Standard: `<UApp>` wrapper required, `@nuxt/ui` + `tailwindcss` imported in CSS. | [F-004_LOGIN](../archive/F-004_LOGIN_COMPLETE.md) |
| H-005 | Dashboard | Implemented `dashboard` layout + `auth` middleware. Ported `AppNavigation`. Fixed root route conflict. | [F-006_HOME_PAGE](../archive/F-006_HOME_PAGE_COMPLETE.md) |
| H-006 | QA | Instituted "Zero-Trust" Protocol. Installed Vitest + Playwright. Required Spec-based unit tests for all logic. | [F-007_TESTING](../archive/F-007_TESTING_INFRA_COMPLETE.md) |
| H-007 | Database | Added `user_property_access` MTM table with strict RLS. Established Constants for Property Codes. | [F-008_ACCESS](../archive/F-008_PROPERTY_ACCESS_COMPLETE.md) |
| H-008 | Administration | Implemented Admin Layer (`layers/admin`) with User Management. Added `admin` middleware and V4 UI components. | [F-009_ADMIN](../archive/F-009_ADMIN_USERS_COMPLETE.md) |
| H-010 | Table Engine | Table Engine v1.0 released. Core architecture established. GenericDataTable with 6 slots, 9 cell components, export (CSV/PDF), column presets. Living documentation at `layers/table/AI_USAGE_GUIDE.md`. | - |
| H-011 | Parsing Engine | Parsing Engine v1.0 released. Standardized specialized `layers/parsing` module. Implemented `useGenericParser` with 3 core strategies (Standard, Yardi Report, Fill Down). Configuration-driven architecture with Playground generator. | [08_PARSING_ENGINE](../specs/base/08_PARSING_ENGINE.md) |
| H-012 | Solver Engine | Established "Anchor" Architecture (Tenancy-Centric). Defined "Strict Primary" vs "Safe Sync" protocols for complex data merging. Created Solver Logic documentation. | [SOLVER_LOGIC](../../layers/parsing/docs/SOLVER_LOGIC_EXPLAINED.md) |
| H-013 | Solver Phase 2 | Implemented Leases table with 3-Criteria Renewal Detection, UPDATE-based Safe Sync, and historical preservation. Created `leases_view` for enriched reporting. | [SOLVER_LOGIC](../../layers/parsing/docs/SOLVER_LOGIC_EXPLAINED.md) |
| H-014 | Solver Phase 2A | Implemented Notices processing with unit resolution, status auto-fix, and dual table updates. Fixed schema issues and NOT NULL constraints. Tested with 61 notices across 5 properties. | [SOLVER_LOGIC](../../layers/parsing/docs/SOLVER_LOGIC_EXPLAINED.md) |
| H-015 | Unit Flags System | Created extensible unit_flags infrastructure for ALL unit-level alerts. EAV pattern with JSONB metadata, partial unique index, soft delete. Implemented MakeReady overdue detection as first flag type. Core infrastructure for future modules. | [UNIT_FLAGS_GUIDE](../architecture/UNIT_FLAGS_GUIDE.md) |
| H-016 | Solver Phase 2D | Implemented Applications processing with unit resolution, availability updates, application upsert, and overdue flag creation. Fixed 5 critical bugs including parser NULL handling and schema redundancy. Removed status/is_overdue columns. | [SOLVER_LOGIC](../../layers/parsing/docs/SOLVER_LOGIC_EXPLAINED.md) |
| H-017 | Solver Engine Complete | Completed all Solver Engine core phases (1, 2, 2A, 2C, 2D). All data processing working. Optional files (`5p_Transfers`, `5p_Leased_Units`) deferred. Phase 3 (UI presentation) is future work. | [SOLVER_STATUS](../handoff/SOLVER_STATUS_CLARIFICATION.md) |
| H-018 | Schema Sync & Table Prep | Fixed availability_status ENUM, created view_availabilities_metrics and view_leases, resolved 406 errors. Established PR workflow policy. Prepared dispatch commands for Table Presentation Phase (Asset tables + Availabilities). | [SCHEMA_SYNC](../handoff/SCHEMA_SYNC_SUMMARY.md) |
| H-019 | Ops Module | Completed Assets (4 types) and Office (Leases, Residents, Availabilities) list and detail pages. Standardized SQL View architecture and implemented Vacancy Intensity Scaling. | [OPS_COMPLETE](../archive/F-012_F-014_OPS_COMPLETE.md) |
| H-020 | Delinquencies Engine | Implemented Immutable History pattern for debt tracking. Solved 1k-row limit via Paginated Sync. Created Analytics Views for 26th-of-month benchmarks and Daily Trends. Dashboard v1 released. | [DELINQUENCIES](../layers/ops/docs/DELINQUENCIES_ENGINE.md) |
| H-021 | Email Notifications | Implemented consolidated email notification system (F-015) with group-delivery. Added `property_notification_recipients` table and `/admin/notifications` management UI. | [HANDOVER](./handovers/20260204_handover_report.md) |
| H-022 | Admin Stability | Refactored `usePropertyState` and Auth middleware for hydration-safe SSR (F-016). Resolved flicker and 401 errors during server-side rendering. | [HANDOVER](./handovers/20260204_handover_report.md) |
| H-023 | Leasing Pipeline | Implemented view_leasing_pipeline with hybrid architecture (UNION of availabilities + tenancies). Solved visibility gap for 19 Future/Applicant units. Added Phase 2C-2 for stale record updates. Dynamic UI columns by filter. | [LATEST_UPDATE](LATEST_UPDATE.md) |
| H-024 | Lease Extraction | Extracted lease data from Residents Status for Future/Applicant tenancies. Added 'Applicant' to lease_status enum. Created 25 new lease records. Fixed parseCurrency bug, displayFilter initialization, and vacant_days color logic. | [LEASE_EXTRACTION](LEASE_EXTRACTION_IMPLEMENTATION.md) |
| H-025 | Asset Details V2 | Enhanced Property, Building, Floor Plan, and Unit details with high-fidelity summary cards, stable scrollable layouts, and dark-mode standardization. Implemented Image Magnification and design tokens. | [DESIGN_STANDARDS](../../docs/architecture/DESIGN_STANDARDS.md) |
| H-026 | Office Details V2 | Enhanced Resident, Lease, and Availability details with Active Lease, Payment History, and Leasing Pipeline chronology. Integrated relational summaries. | [WALKTHROUGH](walkthrough.md) |
| H-027 | Solver Final Polish | Resolved 409 Conflict (idempotent unit_flags) and 406 Not Acceptable (availabilities query) errors. Optimized solver for 11-report daily runs. | [SESSION_HANDOFF](../handovers/SESSION_2026_02_06_SOLVER_FINAL_POLISH.md) |
| H-028 | Executive Reporting | Implemented Markdown Tables for daily changes and Availabilities Price Tracking. Added Tracking Isolation pattern to minimize logic pollution. | [HANDOFF_PRICE_TRACKING](../handovers/HANDOFF_2026_02_06_PRICE_TRACKING.md) |
| H-029 | Amenities & Pricing | Implemented Amenities Module (two-tier system), Smart Sync for Yardi snapshots, and recursive Rent Solver for target rent matching. Created Floor Plan Pricing Manager UI. | [WALKTHROUGH](walkthrough.md) |
| H-030 | UI Architecture | Instituted "Simple Components Law" to bypass broken Nuxt UI UModal/UTabs. Established `SimpleModal` and `SimpleTabs` as global standards. | [SIMPLE_COMPONENTS](../architecture/SIMPLE_COMPONENTS.md) |
| H-031 | SYNC System Logic | Overhauled SYNC alerts with 3-tier severity (Red/Blue/Green) and multi-field amenity matching. Reduced false positives by ~90%. | [FOREMAN_REPORT](../handovers/FOREMAN_SYNC_SYSTEM_COMPLETION.md) |
| H-032 | Production Trial | Successful Vercel Deployment Trial. Validated build settings (`.output`) and environment variable configuration. Created `docs/deployment/VERCEL_SETUP.md`. | [VERCEL_SETUP](../deployment/VERCEL_SETUP.md) |
| H-033 | Location Intelligence | Phase 3 Complete: Location Notes, Client-Side Compression (90% reduction), and custom Map UI. Established mandatory image optimization law. | [HANDOVER](../handovers/H-033_LOCATION_NOTES_IMAGE_COMPRESSION.md) |
| H-034 | Email Reporting | Implemented High-Fidelity HTML emails with property-scoped leasing events and premium design. Audited daily upload logs for parsing bugs. | [ARCHIVE](../archive/F-020_DAILY_UPLOAD_EMAIL_COMPLETE.md) |
| H-035 | Unified Alerts | Implemented `view_table_alerts_unified` (UNION of Yardi/App alerts) with 3-tab dashboard, source badges, and Sat/Sun-aware overdue logic. | [HANDOFF](../archive/F-022_UNIFIED_ALERTS_AND_TIMEZONE_FIX.md) |
| H-036 | Date Handling | Instituted Timezone-Agnostic Date Handling law to resolve 1-day offset bugs across PST/MST properties. Created `date-helpers.ts`. | [HANDOFF](../archive/F-022_UNIFIED_ALERTS_AND_TIMEZONE_FIX.md) |
| H-037 | Renewals Architecture | Resolved "Maximum recursive updates" loop by adopting the Separate Input/Output Refs pattern. Implemented localStorage draft system and SF-based sorting. | [COMPLETION_REPORT](../handovers/RENEWALS_COMPLETION_REPORT.md) |
| H-038 | Claude Daily Audit | Fixed 3 critical bugs in `useSolverEngine.ts` confirmation hook (42703, 23502). Established Daily Audit protocol and Golden Prompt for forensic synchronization. | [AUDIT_FIXES](../fixes/RENEWALS_CONFIRMATION_HOOK_FIX.md) |
| H-039 | Dashboard & Media | Launched Premium "Control Center" Landing Page with SortableJS grid. Standardized Image System with edge-to-edge modal enlargement law. | [SHIFT_ARCHIVE](../archive/SHIFT_2026_02_14_DASHBOARD_AND_AUDIT.md) |
| H-040 | Renewals (CA) | Implemented CA rent control compliance (10% cap), batch status updates, and date-fns integration for forecasting. Fixed checkbox selection bug. | [LATEST_UPDATE](LATEST_UPDATE.md) |
| H-041 | Excel Table System | Completed Excel-based configuration for all 11 tables with responsive breakpoints (P1-P5). Fixed Tailwind max-* variants, extended zebra stripes, and created ScreenDebug tool. Zero-code table updates via Excel. | [SESSION_SUMMARY](SESSION_2026_02_16_EXCEL_TABLES.md) |
| H-042 | Inventory System | Implemented three-tier inventory model (Categories -> Items -> Installations). Built mobile-optimized `LocationSelector` for 392 units. Integrated photo capture and lifecycle health-status logic. | [SESSION_SUMMARY](SESSION_2026_02_19_INVENTORY_COMPLETE.md) |
